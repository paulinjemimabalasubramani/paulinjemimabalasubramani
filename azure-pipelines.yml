# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml
name: $(SourceBranchName)_$(Build_Pipeline)_$(date:yyyyMMdd)$(rev:.r)

trigger:
- master

pool:
  name: EDIP_Agents

steps:

- task: CopyFiles@2
  displayName: "Copy Code Files"
  inputs:
    SourceFolder: '$(agent.builddirectory)'
    Contents: '**'
    TargetFolder: '$(build.artifactstagingdirectory)'


- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: $(build.artifactstagingdirectory)/s/src
    artifactName: SRC
- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: $(build.artifactstagingdirectory)/s/dags
    artifactName: DAGS
- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: $(build.artifactstagingdirectory)/s/drivers
    artifactName: DRIVERS
- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: $(build.artifactstagingdirectory)/s/config
    artifactName: CONFIG